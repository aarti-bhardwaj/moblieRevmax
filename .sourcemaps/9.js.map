{"version":3,"sources":["../../src/pages/cart/cart.module.ts","../../src/pages/cart/cart.ts"],"names":[],"mappings":"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","file":"9.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { CartPage } from './cart';\nimport { IonicStorageModule } from '@ionic/storage';\n\n@NgModule({\n  declarations: [\n    CartPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(CartPage),\n    IonicStorageModule.forRoot()\n  ],\n})\nexport class CartPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cart/cart.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ViewController } from 'ionic-angular';\nimport { Storage } from '@ionic/storage';\nimport { AppConfigurationProvider as AppConfig } from '../../providers/configuration/app-configuration';\nimport { LoadingController } from 'ionic-angular';\n\n/**\n * Generated class for the CartPage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n\n@IonicPage(\n  {\n    name: 'cart',\n    segment: 'cart'\n  }\n)\n@Component({\n  selector: 'page-cart',\n  templateUrl: 'cart.html',\n})\nexport class CartPage {\n  cartString: string;\n  quantity: any;\n  cartItems: any[] = [];\n  total: any;\n  forsellProducts: any[] = [];\n  forcellProductPrice:any;   /* when product is coming from web cart */\n  \n  showEmptyCartMessage: boolean = false;\n  constructor(public navCtrl: NavController, \n    public navParams: NavParams, public storage: Storage, \n    public viewCtrl: ViewController, private appConfig: AppConfig,\n    public loadingCtrl: LoadingController,) {\n\n      /* Clear cart on web */\n    // this.appConfig.emptyCart().subscribe((response) => {\n    //   console.log(\"cart is empty\");\n    //   console.log(response);\n    // })\n\n    console.log('in add to cart');\n    this.storage.get(\"cart\").then((data) => {\n      console.log(data);\n      this.total = 0.0;\n      this.cartItems = data;\n      console.log(this.cartItems);\n\n      if (this.cartItems != null) {\n        if (this.cartItems.length > 0) {\n          this.cartItems.forEach((item, index) => {\n            this.total = this.total + item.amount;\n            console.log(\"this is the total price\");\n            console.log(this.total);\n            if (item.forcell_products) {\n              this.total = this.total + (item.forcell_products.product_price * item.quantity);\n            }\n          })\n\n        } else {\n          this.showEmptyCartMessage = true;\n        }\n      }\n\n    })\n\n  } /* Constructor ends here */\n\n \n\n  removeFromCart(item, i){ \n    // let price = item.price;\n    // let quantity = item.quantity;  \n    this.cartItems.splice(i, 1);\n\n    this.total = this.total - item.amount;\n    if (item.forcell_products) {\n      this.total = this.total - (item.forcell_products.product_price * item.quantity);\n    }\n\n    this.storage.set(\"cart\", this.cartItems);\n\n    if(this.cartItems.length == 0){\n      this.showEmptyCartMessage = true;\n    }\n    \n  }\n\n  addQuantity(item, qty){\n    console.log(qty);\n    console.log(\"by addition\");\n    console.log(item);\n    this.storage.get(\"cart\").then((data) => {\n      for (let i = 0; i < data.length; i++) {\n        \n        if (item.product_id == data[i].product_id) {\n          // this.total = parseFloat(this.total) - parseFloat(data[i].amount);\n          // console.log(\"Product is already in the cart\");\n          console.log(\"total price before adding anything\");\n          console.log(this.total);\n          if(qty == \"add\"){\n            data[i].quantity = data[i].quantity+1 ;\n            data[i].amount = data[i].amount + parseFloat(data[i].price);\n            this.total = this.total + parseFloat(data[i].price);\n            console.log(\"total price in case of addition\");\n            console.log(this.total);\n          }else{\n            if (data[i].quantity == 1){\n              data[i].quantity = 1;\n            }else{\n              data[i].quantity = data[i].quantity - 1;\n              data[i].amount = data[i].amount - parseFloat(data[i].price);\n              this.total = this.total - parseFloat(data[i].price);\n              console.log(\"total prise in case of substraction\");\n              console.log(this.total);\n            }\n          }\n          // delete data[i].amount;\n          // data[i].amount = parseFloat(data[i].price) * parseFloat(data[i].quantity);\n          // this.total = parseFloat(this.total) + parseFloat(data[i].amount);\n          console.log(\"total price before adding foresell product\");\n          console.log(this.total);\n          if (item.forcell_products) {\n            if (qty == \"add\") {\n              console.log(\"In else of forsell products\");\n              this.total = this.total + parseFloat(data[i].forcell_products.product_price);\n              console.log(\"total after adding forcell\");\n              console.log(this.total);\n            } else {\n              if (qty == \"sub\") {\n                if (item.quantity == 1) {\n                  /* Do Nothing */\n                } else {\n                  this.total = this.total - parseFloat(data[i].forcell_products.product_price);\n                  console.log(\"total after subtracting forcell\");\n                  console.log(this.total);\n                }\n              }\n            }\n          }\n        }\n      }\n\n      this.storage.set(\"cart\", data).then(() => {\n        console.log(\"Quantity Updated\");\n        this.cartItems = data;\n        console.log(data);\n      })\n     \n    })\n  }\n    \n  closeModal(){\n    this.viewCtrl.dismiss();\n  }\n  \n  checkout(e){\n    console.log('hit');\n    // e.preventDefault();\n    console.log(\"in checkout\");\n    this.storage.get(\"cart\").then((data) => {\n      for (let i = 0; i < data.length; i++) {\n        if(data[i].amount){\n          delete data[i].amount;\n          delete data[i].forcell_products;\n          delete data[i].name;\n          delete data[i].image;\n          delete data[i].price;\n        }\n      }\n      console.log(data);\n      this.cartString = JSON.stringify(data);\n      console.log(this.cartString);\n      // this.appConfig.emptyCart().subscribe((response) => {\n      //   console.log(\"cart is empty\");\n      //   console.log(response);\n      // })\n     \n    })\n  }\n\n  formSubmit(){\n    console.log(\"In form submit function\");\n    this.storage.get(\"cart\").then((data) => {\n      \n      data = [];\n      \n      this.storage.set(\"cart\", data).then(() => {\n        console.log(\"Data is empty now\");\n        // this.cartItems = data;\n        this.total = 0.00;\n        console.log(data);\n\n        let loader = this.loadingCtrl.create({\n          content: \"Redirecting to cart...\",\n          duration: 5000\n        });\n        loader.present();\n        this.viewCtrl.dismiss();\n      })\n    })\n  }\n}/* Class ends here */\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cart/cart.ts"],"sourceRoot":""}